@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* ═══════════════════════════════════════════════════════════════════════════
   SECOND BRAIN - "Observatory" Design System
   A sophisticated command-center aesthetic for knowledge management
   ═══════════════════════════════════════════════════════════════════════════ */

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
}

:root {
  --radius: 0.625rem;

  /* Observatory Palette - Warm Charcoal + Coral Accents */
  --background: #0C0B0E;
  --foreground: #F5F3F0;

  /* Surface hierarchy */
  --card: #13121A;
  --card-foreground: #F5F3F0;
  --popover: #13121A;
  --popover-foreground: #F5F3F0;

  /* Primary - Warm Coral (unexpected, memorable) */
  --primary: #FF7A5C;
  --primary-foreground: #0C0B0E;

  /* Secondary - Muted Violet */
  --secondary: #1E1D2A;
  --secondary-foreground: #9D9BA8;

  /* Muted tones */
  --muted: #18171F;
  --muted-foreground: #6B6977;

  /* Accent - Warm Gold */
  --accent: #FFD166;
  --accent-foreground: #0C0B0E;

  /* Utility colors */
  --destructive: #FF6B6B;
  --border: rgba(255, 255, 255, 0.05);
  --input: rgba(255, 255, 255, 0.06);
  --ring: #FF7A5C;

  /* Extended palette */
  --success: #06D6A0;
  --warning: #FFD166;
  --info: #73A9FF;

  /* Chart colors - Warm gradient */
  --chart-1: #FF7A5C;
  --chart-2: #FFD166;
  --chart-3: #06D6A0;
  --chart-4: #73A9FF;
  --chart-5: #A78BFA;

  /* Sidebar */
  --sidebar: #0F0E14;
  --sidebar-foreground: #F5F3F0;
  --sidebar-primary: #FF7A5C;
  --sidebar-primary-foreground: #0C0B0E;
  --sidebar-accent: #1E1D2A;
  --sidebar-accent-foreground: #F5F3F0;
  --sidebar-border: rgba(255, 255, 255, 0.04);
  --sidebar-ring: #FF7A5C;
}

.dark {
  --background: #0C0B0E;
  --foreground: #F5F3F0;
  --card: #13121A;
  --card-foreground: #F5F3F0;
  --popover: #13121A;
  --popover-foreground: #F5F3F0;
  --primary: #FF7A5C;
  --primary-foreground: #0C0B0E;
  --secondary: #1E1D2A;
  --secondary-foreground: #9D9BA8;
  --muted: #18171F;
  --muted-foreground: #6B6977;
  --accent: #FFD166;
  --accent-foreground: #0C0B0E;
  --destructive: #FF6B6B;
  --border: rgba(255, 255, 255, 0.05);
  --input: rgba(255, 255, 255, 0.06);
  --ring: #FF7A5C;
  --chart-1: #FF7A5C;
  --chart-2: #FFD166;
  --chart-3: #06D6A0;
  --chart-4: #73A9FF;
  --chart-5: #A78BFA;
  --sidebar: #0F0E14;
  --sidebar-foreground: #F5F3F0;
  --sidebar-primary: #FF7A5C;
  --sidebar-primary-foreground: #0C0B0E;
  --sidebar-accent: #1E1D2A;
  --sidebar-accent-foreground: #F5F3F0;
  --sidebar-border: rgba(255, 255, 255, 0.04);
  --sidebar-ring: #FF7A5C;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1, "ss02" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  html {
    scroll-behavior: smooth;
  }

  /* Observatory Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(255, 122, 92, 0.2);
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 122, 92, 0.35);
    background-clip: padding-box;
  }

  /* Selection - Warm coral */
  ::selection {
    background: rgba(255, 122, 92, 0.25);
    color: #F5F3F0;
  }
}

@layer components {
  /* ─────────────────────────────────────────────────────────────────────────
     CARD SYSTEM
     ───────────────────────────────────────────────────────────────────────── */

  .card-observatory {
    @apply relative overflow-hidden rounded-xl border border-white/[0.04] bg-[#13121A]/90;
    box-shadow:
      inset 0 1px 0 0 rgba(255, 255, 255, 0.03),
      0 2px 8px rgba(0, 0, 0, 0.25),
      0 8px 24px rgba(0, 0, 0, 0.2);
  }

  .card-observatory::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.02) 0%,
      transparent 40%
    );
    pointer-events: none;
  }

  .card-elevated {
    @apply relative overflow-hidden rounded-2xl border border-white/[0.06] bg-gradient-to-b from-[#18171F] to-[#13121A];
    box-shadow:
      inset 0 1px 0 0 rgba(255, 255, 255, 0.04),
      0 4px 16px rgba(0, 0, 0, 0.3),
      0 12px 40px rgba(0, 0, 0, 0.25);
  }

  .card-subtle {
    @apply rounded-lg border border-white/[0.03] bg-white/[0.02] backdrop-blur-sm;
  }

  /* ─────────────────────────────────────────────────────────────────────────
     BUTTON SYSTEM
     ───────────────────────────────────────────────────────────────────────── */

  .btn-observatory {
    @apply relative inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium;
    @apply bg-white/[0.03] border border-white/[0.06] text-[#B8B5C4];
    @apply transition-all duration-200 ease-out;
    @apply hover:bg-white/[0.06] hover:border-white/[0.1] hover:text-white;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 focus-visible:ring-offset-background;
    @apply active:scale-[0.98];
  }

  .btn-primary {
    @apply relative inline-flex items-center justify-center gap-2 rounded-lg px-5 py-2.5 text-sm font-semibold;
    @apply bg-gradient-to-b from-[#FF8A6D] to-[#FF7A5C] text-[#0C0B0E];
    @apply border border-[#FF9A7D]/20;
    @apply transition-all duration-200 ease-out;
    @apply hover:from-[#FF9A7D] hover:to-[#FF8A6D];
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background;
    @apply active:scale-[0.98];
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.2),
      0 0 0 1px rgba(255, 122, 92, 0.1),
      0 4px 16px rgba(255, 122, 92, 0.2);
  }

  .btn-primary:hover {
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.2),
      0 0 0 1px rgba(255, 122, 92, 0.15),
      0 8px 24px rgba(255, 122, 92, 0.3);
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 rounded-lg px-3 py-2 text-sm;
    @apply text-[#9D9BA8] transition-all duration-150;
    @apply hover:bg-white/[0.04] hover:text-white;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-white/10;
  }

  /* ─────────────────────────────────────────────────────────────────────────
     INPUT SYSTEM
     ───────────────────────────────────────────────────────────────────────── */

  .input-observatory {
    @apply w-full rounded-lg border border-white/[0.06] bg-white/[0.02] px-4 py-2.5 text-sm text-white;
    @apply placeholder:text-[#6B6977];
    @apply transition-all duration-200;
    @apply focus:border-primary/40 focus:bg-white/[0.04] focus:outline-none focus:ring-2 focus:ring-primary/10;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .input-observatory:focus {
    box-shadow:
      inset 0 1px 2px rgba(0, 0, 0, 0.1),
      0 0 0 3px rgba(255, 122, 92, 0.08);
  }

  /* ─────────────────────────────────────────────────────────────────────────
     STATUS SYSTEM
     ───────────────────────────────────────────────────────────────────────── */

  .status-beacon {
    @apply relative;
  }

  .status-beacon::before {
    content: '';
    @apply absolute inset-0 rounded-full;
    animation: beacon-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes beacon-pulse {
    0%, 100% { transform: scale(1); opacity: 0.6; }
    50% { transform: scale(1.8); opacity: 0; }
  }

  .status-active {
    @apply bg-[#06D6A0];
  }
  .status-active::before {
    @apply bg-[#06D6A0]/40;
  }

  .status-warning {
    @apply bg-[#FFD166];
  }
  .status-warning::before {
    @apply bg-[#FFD166]/40;
  }

  .status-idle {
    @apply bg-[#6B6977];
  }
  .status-idle::before {
    animation: none;
  }

  .status-connected {
    @apply bg-[#73A9FF];
  }
  .status-connected::before {
    @apply bg-[#73A9FF]/40;
  }

  /* ─────────────────────────────────────────────────────────────────────────
     TYPOGRAPHY
     ───────────────────────────────────────────────────────────────────────── */

  .text-gradient-warm {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, #FF7A5C 0%, #FFD166 100%);
  }

  .text-gradient-cool {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, #73A9FF 0%, #A78BFA 100%);
  }

  .text-gradient-subtle {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(180deg, #F5F3F0 0%, #9D9BA8 100%);
  }

  .label-mono {
    @apply font-mono text-[10px] uppercase tracking-[0.2em] text-[#6B6977];
  }

  .heading-display {
    @apply text-3xl font-semibold tracking-tight text-white;
    letter-spacing: -0.02em;
  }

  /* ─────────────────────────────────────────────────────────────────────────
     MARKDOWN
     ───────────────────────────────────────────────────────────────────────── */

  .markdown {
    @apply text-[#B8B5C4] leading-relaxed;
  }

  .markdown h1 {
    @apply mt-12 mb-6 text-3xl font-semibold tracking-tight text-white;
    letter-spacing: -0.02em;
  }

  .markdown h2 {
    @apply mt-10 mb-4 text-2xl font-semibold tracking-tight text-white;
    letter-spacing: -0.01em;
  }

  .markdown h3 {
    @apply mt-8 mb-3 text-lg font-medium text-white;
  }

  .markdown p {
    @apply mt-4 text-[15px] leading-7 text-[#9D9BA8];
  }

  .markdown a {
    @apply text-primary underline decoration-primary/30 underline-offset-4;
    @apply transition-colors hover:text-[#FF9A7D] hover:decoration-primary/50;
  }

  .markdown ul {
    @apply mt-4 space-y-2.5 pl-0 text-[#9D9BA8];
  }

  .markdown ul li {
    @apply relative pl-5;
  }

  .markdown ul li::before {
    content: '';
    @apply absolute left-0 top-[0.7em] h-1 w-1 rounded-full bg-primary/60;
  }

  .markdown ol {
    @apply mt-4 space-y-2 pl-0 text-[#9D9BA8] list-none;
    counter-reset: item;
  }

  .markdown ol li {
    @apply relative pl-7;
    counter-increment: item;
  }

  .markdown ol li::before {
    content: counter(item);
    @apply absolute left-0 top-0 font-mono text-xs text-primary/70;
  }

  .markdown blockquote {
    @apply mt-6 border-l-2 border-primary/40 pl-5 text-[#6B6977] italic;
  }

  .markdown code {
    @apply rounded-md bg-white/[0.05] px-1.5 py-0.5 text-[0.875em] text-[#FF9A7D] font-mono;
    font-feature-settings: "liga" 0;
  }

  .markdown pre {
    @apply mt-6 overflow-x-auto rounded-xl border border-white/[0.05] bg-[#0F0E14] p-5 text-sm;
  }

  .markdown pre code {
    @apply bg-transparent p-0 text-[#B8B5C4];
  }

  .markdown hr {
    @apply my-12 border-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent;
  }

  .markdown table {
    @apply mt-6 w-full border-collapse text-left text-sm;
  }

  .markdown th {
    @apply border-b border-white/[0.08] pb-3 text-[10px] font-medium uppercase tracking-[0.15em] text-[#6B6977];
  }

  .markdown td {
    @apply border-b border-white/[0.04] py-3.5 text-[#9D9BA8];
  }

  .markdown img {
    @apply mt-6 rounded-xl border border-white/[0.05];
  }

  /* ─────────────────────────────────────────────────────────────────────────
     TAG SYSTEM
     ───────────────────────────────────────────────────────────────────────── */

  .tag {
    @apply inline-flex items-center rounded-full px-2.5 py-1 text-[11px] font-medium;
    @apply bg-white/[0.03] text-[#9D9BA8] border border-white/[0.04];
    @apply transition-all duration-150 hover:bg-white/[0.05] hover:text-white;
  }

  .tag-primary {
    @apply bg-primary/10 text-primary border-primary/20;
    @apply hover:bg-primary/15;
  }

  .tag-success {
    @apply bg-[#06D6A0]/10 text-[#06D6A0] border-[#06D6A0]/20;
    @apply hover:bg-[#06D6A0]/15;
  }

  .tag-warning {
    @apply bg-[#FFD166]/10 text-[#FFD166] border-[#FFD166]/20;
    @apply hover:bg-[#FFD166]/15;
  }

  .tag-info {
    @apply bg-[#73A9FF]/10 text-[#73A9FF] border-[#73A9FF]/20;
    @apply hover:bg-[#73A9FF]/15;
  }

  .tag-violet {
    @apply bg-[#A78BFA]/10 text-[#A78BFA] border-[#A78BFA]/20;
    @apply hover:bg-[#A78BFA]/15;
  }

  /* ─────────────────────────────────────────────────────────────────────────
     BACKGROUND EFFECTS
     ───────────────────────────────────────────────────────────────────────── */

  .bg-observatory {
    background:
      radial-gradient(ellipse 80% 60% at 50% -10%, rgba(255, 122, 92, 0.06), transparent 50%),
      radial-gradient(ellipse 60% 40% at 100% 50%, rgba(255, 209, 102, 0.04), transparent 40%),
      radial-gradient(ellipse 50% 50% at 0% 80%, rgba(115, 169, 255, 0.04), transparent 40%),
      #0C0B0E;
  }

  .grid-overlay {
    background-image:
      linear-gradient(rgba(255, 255, 255, 0.015) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.015) 1px, transparent 1px);
    background-size: 60px 60px;
  }

  .noise-overlay {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.025;
  }

  .glow-primary {
    box-shadow: 0 0 50px rgba(255, 122, 92, 0.12);
  }

  .glow-accent {
    box-shadow: 0 0 50px rgba(255, 209, 102, 0.12);
  }

  /* ─────────────────────────────────────────────────────────────────────────
     DIVIDERS
     ───────────────────────────────────────────────────────────────────────── */

  .divider-fade {
    @apply h-px w-full;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.08) 50%, transparent);
  }

  .divider-glow {
    @apply h-px w-full;
    background: linear-gradient(90deg, transparent, rgba(255, 122, 92, 0.3) 50%, transparent);
  }

  /* ─────────────────────────────────────────────────────────────────────────
     INTERACTIVE STATES
     ───────────────────────────────────────────────────────────────────────── */

  .hover-lift {
    @apply transition-all duration-300 ease-out;
  }

  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow:
      0 8px 24px rgba(0, 0, 0, 0.3),
      0 0 0 1px rgba(255, 255, 255, 0.04);
  }

  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }

  /* ─────────────────────────────────────────────────────────────────────────
     SECTION NUMBERS (Editorial style)
     ───────────────────────────────────────────────────────────────────────── */

  .section-number {
    @apply font-mono text-[64px] font-bold leading-none text-white/[0.03];
    letter-spacing: -0.04em;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   ANIMATIONS
   ═══════════════════════════════════════════════════════════════════════════ */

@layer utilities {
  .animate-fade-in {
    animation: fade-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-slide-up {
    animation: slide-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-slide-down {
    animation: slide-down 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-scale-in {
    animation: scale-in 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-glow-pulse {
    animation: glow-pulse 3s ease-in-out infinite;
  }

  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-down {
    from {
      opacity: 0;
      transform: translateY(-16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.96);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes glow-pulse {
    0%, 100% {
      box-shadow: 0 0 20px rgba(255, 122, 92, 0.15);
    }
    50% {
      box-shadow: 0 0 40px rgba(255, 122, 92, 0.25);
    }
  }

  /* Stagger delays with smooth easing */
  .stagger-1 { animation-delay: 0.05s; }
  .stagger-2 { animation-delay: 0.1s; }
  .stagger-3 { animation-delay: 0.15s; }
  .stagger-4 { animation-delay: 0.2s; }
  .stagger-5 { animation-delay: 0.25s; }
  .stagger-6 { animation-delay: 0.3s; }
  .stagger-7 { animation-delay: 0.35s; }
  .stagger-8 { animation-delay: 0.4s; }

  /* Text utilities */
  .text-balance {
    text-wrap: balance;
  }

  .tracking-display {
    letter-spacing: -0.02em;
  }
}
